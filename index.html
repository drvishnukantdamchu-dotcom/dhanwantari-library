<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рдзрдиреНрд╡рдВрддрд░реА рдЖрдпреБрд░реНрд╡реЗрдж рдореЗрдбрд┐рдХрд▓ рдХреЙрд▓реЗрдЬ - рд▓рд╛рдпрдмреНрд░рд░реА</title>
    <link rel="stylesheet" href="style.css">
    <!-- QR Code Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <!-- xlsx for Excel export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>

<!-- ===== HEADER ===== -->
<header>
    <div class="header-content">
        <h1>ЁЯПЫя╕П рдзрдиреНрд╡рдВрддрд░реА рдЖрдпреБрд░реНрд╡реЗрдж рдореЗрдбрд┐рдХрд▓ рдХреЙрд▓реЗрдЬ, рдЙрджрдЧреАрд░</h1>
        <h2>ЁЯУЪ рд▓рд╛рдпрдмреНрд░рд░реА рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдкреНрд░рдгрд╛рд▓реА</h2>
        <p class="stats" id="headerStats">рдПрдХреВрдг рдкреБрд╕реНрддрдХреЗ: 0 | рдЙрдкрд▓рдмреНрдз: 0 | рд╡рд┐рддрд░рд┐рдд: 0</p>
    </div>
</header>

<!-- ===== NAVIGATION ===== -->
<nav>
    <button class="nav-btn active" onclick="showSection('dashboard')">ЁЯПа рдбреЕрд╢рдмреЛрд░реНрдб</button>
    <button class="nav-btn" onclick="showSection('addBook')">ЁЯУЦ рдкреБрд╕реНрддрдХ рдиреЛрдВрджрдгреА</button>
    <button class="nav-btn" onclick="showSection('searchBook')">ЁЯФН рдкреБрд╕реНрддрдХ рд╢реЛрдзрд╛</button>
    <button class="nav-btn" onclick="showSection('issueReturn')">ЁЯФД рджреЗрд╡рд╛рдг-рдШреЗрд╡рд╛рдг</button>
    <button class="nav-btn" onclick="showSection('students')">ЁЯОУ рд╡рд┐рджреНрдпрд╛рд░реНрдереА</button>
    <button class="nav-btn" onclick="showSection('qrSection')">ЁЯУ▒ QR рдХреЛрдб</button>
    <button class="nav-btn" onclick="showSection('reports')">ЁЯУК рд░рд┐рдкреЛрд░реНрдЯ</button>
    <button class="nav-btn" onclick="showSection('backupSection')">ЁЯТ╛ рдмреЕрдХрдЕрдк</button>
</nav>

<!-- ===== DASHBOARD ===== -->
<section id="dashboard" class="section active">
    <h2>ЁЯУК рдбреЕрд╢рдмреЛрд░реНрдб</h2>
    <div class="dashboard-cards">
        <div class="card blue">
            <h3>ЁЯУЪ рдПрдХреВрдг рдкреБрд╕реНрддрдХреЗ</h3>
            <p id="totalBooks">0</p>
        </div>
        <div class="card green">
            <h3>тЬЕ рдЙрдкрд▓рдмреНрдз</h3>
            <p id="availableBooks">0</p>
        </div>
        <div class="card red">
            <h3>ЁЯУд рд╡рд┐рддрд░рд┐рдд</h3>
            <p id="issuedBooks">0</p>
        </div>
        <div class="card purple">
            <h3>ЁЯОУ рд╡рд┐рджреНрдпрд╛рд░реНрдереА</h3>
            <p id="totalStudents">0</p>
        </div>
        <div class="card orange">
            <h3>тЪая╕П рдореБрджрдд рд╕рдВрдкрд▓реЗрд▓реА</h3>
            <p id="overdueBooks">0</p>
        </div>
        <div class="card teal">
            <h3>ЁЯУЕ рдЖрдЬрдЪреЗ рд╡реНрдпрд╡рд╣рд╛рд░</h3>
            <p id="todayTransactions">0</p>
        </div>
    </div>
    <h3>ЁЯУЛ рдЕрд▓реАрдХрдбреАрд▓ рд╡реНрдпрд╡рд╣рд╛рд░</h3>
    <table id="recentTransactions">
        <thead>
            <tr>
                <th>рддрд╛рд░реАрдЦ/рд╡реЗрд│</th>
                <th>рд╡рд┐рджреНрдпрд╛рд░реНрдереА</th>
                <th>рдкреБрд╕реНрддрдХ</th>
                <th>рдкреНрд░рдХрд╛рд░</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</section>

<!-- ===== ADD BOOK ===== -->
<section id="addBook" class="section">
    <h2>ЁЯУЦ рдирд╡реАрди рдкреБрд╕реНрддрдХ рдиреЛрдВрджрдгреА</h2>
    <form id="addBookForm">
        <div class="form-grid">
            <div class="form-group">
                <label>рдкреБрд╕реНрддрдХ рдХреНрд░рдорд╛рдВрдХ (Accession No.) *</label>
                <input type="text" id="bookAccNo" required placeholder="рдЙрджрд╛. ACC-00001">
            </div>
            <div class="form-group">
                <label>рдкреБрд╕реНрддрдХрд╛рдЪреЗ рдирд╛рд╡ *</label>
                <input type="text" id="bookName" required placeholder="рдкреБрд╕реНрддрдХрд╛рдЪреЗ рдирд╛рд╡ рд▓рд┐рд╣рд╛">
            </div>
            <div class="form-group">
                <label>рд▓реЗрдЦрдХ *</label>
                <input type="text" id="bookAuthor" required placeholder="рд▓реЗрдЦрдХрд╛рдЪреЗ рдирд╛рд╡">
            </div>
            <div class="form-group">
                <label>рдкреНрд░рдХрд╛рд╢рдХ</label>
                <input type="text" id="bookPublisher" placeholder="рдкреНрд░рдХрд╛рд╢рдХрд╛рдЪреЗ рдирд╛рд╡">
            </div>
            <div class="form-group">
                <label>ISBN</label>
                <input type="text" id="bookISBN" placeholder="ISBN рдХреНрд░рдорд╛рдВрдХ">
            </div>
            <div class="form-group">
                <label>рдкреНрд░рдХрд╛рд╢рди рд╡рд░реНрд╖</label>
                <input type="number" id="bookYear" placeholder="2024">
            </div>
            <div class="form-group">
                <label>рд╡рд┐рд╖рдп / Category *</label>
                <select id="bookCategory">
                    <option value="Ayurveda">рдЖрдпреБрд░реНрд╡реЗрдж</option>
                    <option value="Anatomy">рд╢рд░реАрд░рд░рдЪрдирд╛ (Anatomy)</option>
                    <option value="Physiology">рд╢рд░реАрд░рдХреНрд░рд┐рдпрд╛ (Physiology)</option>
                    <option value="Pharmacology">рдФрд╖рдзрд╢рд╛рд╕реНрддреНрд░ (Pharmacology)</option>
                    <option value="Pathology">рд╡рд┐рдХреГрддрд┐рд╢рд╛рд╕реНрддреНрд░ (Pathology)</option>
                    <option value="Surgery">рд╢рд▓реНрдпрддрдВрддреНрд░ (Surgery)</option>
                    <option value="Medicine">рдХрд╛рдпрдЪрд┐рдХрд┐рддреНрд╕рд╛ (Medicine)</option>
                    <option value="Panchakarma">рдкрдВрдЪрдХрд░реНрдо</option>
                    <option value="Rasashastra">рд░рд╕рд╢рд╛рд╕реНрддреНрд░</option>
                    <option value="Dravyaguna">рджреНрд░рд╡реНрдпрдЧреБрдг</option>
                    <option value="Samhita">рд╕рдВрд╣рд┐рддрд╛</option>
                    <option value="General">рд╕рд╛рдорд╛рдиреНрдп</option>
                    <option value="Other">рдЗрддрд░</option>
                </select>
            </div>
            <div class="form-group">
                <label>рд░реЕрдХ/рд╢реЗрд▓реНрдл рдХреНрд░рдорд╛рдВрдХ</label>
                <input type="text" id="bookRack" placeholder="рдЙрджрд╛. R1-S3">
            </div>
            <div class="form-group">
                <label>рдХрд┐рдВрдордд (тВ╣)</label>
                <input type="number" id="bookPrice" placeholder="0.00">
            </div>
            <div class="form-group">
                <label>рдкреНрд░рддреАрдВрдЪреА рд╕рдВрдЦреНрдпрд╛</label>
                <input type="number" id="bookCopies" value="1" min="1">
            </div>
        </div>
        <button type="submit" class="btn-primary">тЬЕ рдкреБрд╕реНрддрдХ рдиреЛрдВрджрдгреА рдХрд░рд╛</button>
    </form>
    <br>
    <h3>ЁЯУе Excel/CSV рдордзреВрди рдкреБрд╕реНрддрдХреЗ Import рдХрд░рд╛</h3>
    <p>15,000 рдкреБрд╕реНрддрдХреЗ рдПрдХрджрдо Import рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА Excel рдлрд╛рдИрд▓ рд╡рд╛рдкрд░рд╛</p>
    <input type="file" id="importBooksFile" accept=".xlsx,.xls,.csv">
    <button onclick="importBooksFromFile()" class="btn-secondary">ЁЯУе Import рдХрд░рд╛</button>
    <a href="#" onclick="downloadTemplate()" class="btn-secondary">ЁЯУД Template рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рд╛</a>
</section>

<!-- ===== SEARCH BOOK ===== -->
<section id="searchBook" class="section">
    <h2>ЁЯФН рдкреБрд╕реНрддрдХ рд╢реЛрдзрд╛</h2>
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="рдкреБрд╕реНрддрдХрд╛рдЪреЗ рдирд╛рд╡, рд▓реЗрдЦрдХ, ISBN, рдХрд┐рдВрд╡рд╛ Accession No. рдиреЗ рд╢реЛрдзрд╛..."
               oninput="searchBooks()">
        <select id="searchCategory" onchange="searchBooks()">
            <option value="">рд╕рд░реНрд╡ рд╡рд┐рд╖рдп</option>
            <option value="Ayurveda">рдЖрдпреБрд░реНрд╡реЗрдж</option>
            <option value="Anatomy">рд╢рд░реАрд░рд░рдЪрдирд╛</option>
            <option value="Physiology">рд╢рд░реАрд░рдХреНрд░рд┐рдпрд╛</option>
            <option value="Pharmacology">рдФрд╖рдзрд╢рд╛рд╕реНрддреНрд░</option>
            <option value="Pathology">рд╡рд┐рдХреГрддрд┐рд╢рд╛рд╕реНрддреНрд░</option>
            <option value="Surgery">рд╢рд▓реНрдпрддрдВрддреНрд░</option>
            <option value="Medicine">рдХрд╛рдпрдЪрд┐рдХрд┐рддреНрд╕рд╛</option>
            <option value="Panchakarma">рдкрдВрдЪрдХрд░реНрдо</option>
            <option value="Rasashastra">рд░рд╕рд╢рд╛рд╕реНрддреНрд░</option>
            <option value="Dravyaguna">рджреНрд░рд╡реНрдпрдЧреБрдг</option>
            <option value="Samhita">рд╕рдВрд╣рд┐рддрд╛</option>
        </select>
        <select id="searchStatus" onchange="searchBooks()">
            <option value="">рд╕рд░реНрд╡ рд╕реНрдерд┐рддреА</option>
            <option value="available">рдЙрдкрд▓рдмреНрдз</option>
            <option value="issued">рд╡рд┐рддрд░рд┐рдд</option>
        </select>
    </div>
    <div id="searchResults"></div>
</section>

<!-- ===== ISSUE/RETURN ===== -->
<section id="issueReturn" class="section">
    <h2>ЁЯФД рдкреБрд╕реНрддрдХ рджреЗрд╡рд╛рдг-рдШреЗрд╡рд╛рдг</h2>
    <div class="tabs">
        <button class="tab-btn active" onclick="showTab('issueTab', this)">ЁЯУд рдкреБрд╕реНрддрдХ рджреНрдпрд╛ (Issue)</button>
        <button class="tab-btn" onclick="showTab('returnTab', this)">ЁЯУе рдкреБрд╕реНрддрдХ рдкрд░рдд (Return)</button>
    </div>

    <div id="issueTab" class="tab-content active">
        <form id="issueForm">
            <div class="form-grid">
                <div class="form-group">
                    <label>рдкреБрд╕реНрддрдХ Accession No. / QR рд╕реНрдХреЕрди *</label>
                    <input type="text" id="issueBookId" required placeholder="Accession No. рдЯрд╛рдХрд╛ рдХрд┐рдВрд╡рд╛ QR рд╕реНрдХреЕрди рдХрд░рд╛">
                    <button type="button" onclick="startQRScan('issueBookId')" class="btn-small">ЁЯУ╖ QR рд╕реНрдХреЕрди</button>
                </div>
                <div class="form-group">
                    <label>рд╡рд┐рджреНрдпрд╛рд░реНрдереА ID / рд░реЛрд▓ рдирдВрдмрд░ *</label>
                    <input type="text" id="issueStudentId" required placeholder="рд╡рд┐рджреНрдпрд╛рд░реНрдереА ID рдЯрд╛рдХрд╛">
                </div>
                <div class="form-group">
                    <label>рдкрд░рдд рдХрд░рдгреНрдпрд╛рдЪреА рддрд╛рд░реАрдЦ *</label>
                    <input type="date" id="issueDueDate" required>
                </div>
            </div>
            <div id="issueBookInfo" class="info-box"></div>
            <div id="issueStudentInfo" class="info-box"></div>
            <button type="submit" class="btn-primary">ЁЯУд рдкреБрд╕реНрддрдХ Issue рдХрд░рд╛</button>
        </form>
    </div>

    <div id="returnTab" class="tab-content">
        <form id="returnForm">
            <div class="form-group">
                <label>рдкреБрд╕реНрддрдХ Accession No. / QR рд╕реНрдХреЕрди *</label>
                <input type="text" id="returnBookId" required placeholder="Accession No. рдЯрд╛рдХрд╛ рдХрд┐рдВрд╡рд╛ QR рд╕реНрдХреЕрди рдХрд░рд╛">
                <button type="button" onclick="startQRScan('returnBookId')" class="btn-small">ЁЯУ╖ QR рд╕реНрдХреЕрди</button>
            </div>
            <div id="returnBookInfo" class="info-box"></div>
            <button type="submit" class="btn-primary">ЁЯУе рдкреБрд╕реНрддрдХ рдкрд░рдд рдХрд░рд╛</button>
        </form>
    </div>
</section>

<!-- ===== STUDENTS ===== -->
<section id="students" class="section">
    <h2>ЁЯОУ рд╡рд┐рджреНрдпрд╛рд░реНрдереА рдиреЛрдВрджрдгреА</h2>
    <form id="addStudentForm">
        <div class="form-grid">
            <div class="form-group">
                <label>рд░реЛрд▓ рдирдВрдмрд░ / ID *</label>
                <input type="text" id="studentId" required>
            </div>
            <div class="form-group">
                <label>рд╡рд┐рджреНрдпрд╛рд░реНрдереНрдпрд╛рдЪреЗ рдирд╛рд╡ *</label>
                <input type="text" id="studentName" required>
            </div>
            <div class="form-group">
                <label>рд╡рд░реНрдЧ / Year *</label>
                <select id="studentYear">
                    <option value="1st BAMS">1st BAMS</option>
                    <option value="2nd BAMS">2nd BAMS</option>
                    <option value="3rd BAMS">3rd BAMS</option>
                    <option value="4th BAMS">Final BAMS</option>
                    <option value="MD">MD (PG)</option>
                    <option value="MS">MS (PG)</option>
                    <option value="Faculty">Faculty</option>
                </select>
            </div>
            <div class="form-group">
                <label>рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░</label>
                <input type="tel" id="studentPhone">
            </div>
            <div class="form-group">
                <label>рдИрдореЗрд▓</label>
                <input type="email" id="studentEmail">
            </div>
        </div>
        <button type="submit" class="btn-primary">тЬЕ рд╡рд┐рджреНрдпрд╛рд░реНрдереА рдиреЛрдВрджрдгреА</button>
    </form>
    <br>
    <input type="text" id="studentSearch" placeholder="рд╡рд┐рджреНрдпрд╛рд░реНрдереА рд╢реЛрдзрд╛..." oninput="searchStudents()">
    <div id="studentList"></div>
</section>

<!-- ===== QR CODE ===== -->
<section id="qrSection" class="section">
    <h2>ЁЯУ▒ QR рдХреЛрдб рдЬрдирд░реЗрдЯ рдХрд░рд╛</h2>
    <div class="form-grid">
        <div class="form-group">
            <label>рдкреБрд╕реНрддрдХ Accession No.</label>
            <input type="text" id="qrBookId" placeholder="ACC-00001">
            <button onclick="generateSingleQR()" class="btn-primary">ЁЯУ▒ QR рддрдпрд╛рд░ рдХрд░рд╛</button>
        </div>
        <div class="form-group">
            <label>рдмреЕрдЪ QR (рд╕рд░реНрд╡ рдкреБрд╕реНрддрдХрд╛рдВрд╕рд╛рдареА)</label>
            <button onclick="generateBatchQR()" class="btn-secondary">ЁЯУ▒ рд╕рд░реНрд╡ QR рддрдпрд╛рд░ рдХрд░рд╛</button>
            <button onclick="printQRBatch()" class="btn-secondary">ЁЯЦия╕П рдерд░реНрдорд▓ рдкреНрд░рд┐рдВрдЯ (Batch)</button>
        </div>
    </div>
    <div id="qrOutput" class="qr-grid"></div>
    <!-- QR Size for Thermal Printer -->
    <div class="form-group">
        <label>QR рдЖрдХрд╛рд░ (рдерд░реНрдорд▓ рдкреНрд░рд┐рдВрдЯрд░ рд╕рд╛рдареА)</label>
        <select id="qrSize">
            <option value="100">Small (100x100) - 58mm рдкреНрд░рд┐рдВрдЯрд░</option>
            <option value="150" selected>Medium (150x150) - 80mm рдкреНрд░рд┐рдВрдЯрд░</option>
            <option value="200">Large (200x200)</option>
        </select>
    </div>
</section>

<!-- ===== REPORTS ===== -->
<section id="reports" class="section">
    <h2>ЁЯУК рд░рд┐рдкреЛрд░реНрдЯ</h2>
    <div class="form-grid">
        <button onclick="generateReport('daily')" class="btn-secondary">ЁЯУЕ рдЖрдЬрдЪрд╛ рд░рд┐рдкреЛрд░реНрдЯ</button>
        <button onclick="generateReport('overdue')" class="btn-secondary">тЪая╕П рдореБрджрдд рд╕рдВрдкрд▓реЗрд▓реА рдкреБрд╕реНрддрдХреЗ</button>
        <button onclick="generateReport('popular')" class="btn-secondary">тнР рд▓реЛрдХрдкреНрд░рд┐рдп рдкреБрд╕реНрддрдХреЗ</button>
        <button onclick="generateReport('student')" class="btn-secondary">ЁЯОУ рд╡рд┐рджреНрдпрд╛рд░реНрдереА рд░рд┐рдкреЛрд░реНрдЯ</button>
        <button onclick="exportToExcel()" class="btn-secondary">ЁЯУе Excel Export</button>
    </div>
    <div id="reportOutput"></div>
</section>

<!-- ===== BACKUP ===== -->
<section id="backupSection" class="section">
    <h2>ЁЯТ╛ рдмреЕрдХрдЕрдк рдЖрдгрд┐ рд░рд┐рд╕реНрдЯреЛрд░</h2>
    <div class="backup-cards">
        <div class="card blue">
            <h3>ЁЯУе рдмреЕрдХрдЕрдк рддрдпрд╛рд░ рдХрд░рд╛</h3>
            <p>рд╕рдВрдкреВрд░реНрдг рдбреЗрдЯрд╛рдЪреА JSON рдлрд╛рдИрд▓ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рд╛</p>
            <button onclick="createBackup()" class="btn-primary">ЁЯТ╛ рдмреЕрдХрдЕрдк рдбрд╛рдЙрдирд▓реЛрдб</button>
        </div>
        <div class="card green">
            <h3>ЁЯУд рдбреЗрдЯрд╛ рд░рд┐рд╕реНрдЯреЛрд░ рдХрд░рд╛</h3>
            <p>JSON рдмреЕрдХрдЕрдк рдлрд╛рдИрд▓ рдЕрдкрд▓реЛрдб рдХрд░реВрди рдбреЗрдЯрд╛ рдкрд░рдд рдЖрдгрд╛</p>
            <input type="file" id="restoreFile" accept=".json">
            <button onclick="restoreBackup()" class="btn-primary">ЁЯУд рд░рд┐рд╕реНрдЯреЛрд░ рдХрд░рд╛</button>
        </div>
        <div class="card orange">
            <h3>тШБя╕П Auto Backup</h3>
            <p>рджрд░рд░реЛрдЬ рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рдмреЕрдХрдЕрдк</p>
            <label><input type="checkbox" id="autoBackup" onchange="toggleAutoBackup()"> Auto Backup рдЪрд╛рд▓реВ рдХрд░рд╛</label>
            <p id="lastBackupTime">рд╢реЗрд╡рдЯрдЪрд╛ рдмреЕрдХрдЕрдк: рдХрдзреАрдЪ рдирд╛рд╣реА</p>
        </div>
    </div>
</section>

<!-- ===== QR SCANNER MODAL ===== -->
<div id="qrScannerModal" class="modal" style="display:none;">
    <div class="modal-content">
        <h3>ЁЯУ╖ QR рдХреЛрдб рд╕реНрдХреЕрди рдХрд░рд╛</h3>
        <video id="qrVideo" width="300" height="300"></video>
        <button onclick="closeQRScanner()" class="btn-secondary">тЭМ рдмрдВрдж рдХрд░рд╛</button>
    </div>
</div>

<!-- ===== NOTIFICATION ===== -->
<div id="notification" class="notification"></div>

<!-- ===== SCRIPTS ===== -->
<script src="db.js"></script>
<script src="qr.js"></script>
<script src="backup.js"></script>
<script src="print.js"></script>
<script src="app.js"></script>

</body>
</html>
